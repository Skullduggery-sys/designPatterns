# Паттерн фабричный метод

**Идея**

Разнести на две задачи:

1. Принятие решения, какой объект создавать.
2. Создание объекта, причем при создании объекта нужно "отвязаться" от конкретного типа.

Мы будем создавать специальные объекты, которые отвечают за порождение других объектов.

Диаграмма

![img.png](files/img.png)

**Использование**

Когда нам нужно использовать фабричный метод:

1. Основная задача: подмена одного объекта на другой.
2. Когда принятие решение в одном месте кода, создание - в другом.

**Преимущества**

- Облегчается добавление новых классов, избавляем методы от привязки к конкретным классам.
- Код очищается от `new`, используя полиморфизм по полной (создаём новые классы, не изменяя уже написанный код)
- Паттерн работает во всех языках
- Позволяет разнести в коде принятие решения о создании объекта (solution) и само создание (creator)
- Решение о том, какой объект создавать, принимается во время выполнения, тогда же можно менять это решение

**Недостатки**
- Много кода => разрастается .exe
- Резко растет время выполнения

**Solution**
Принятие решения о том, кто будет создавать объект, мы выносим. Класс, принимающий решение, объект не создает. Он создает объект для его создания.

Solution предоставляет метод для регистрации creator-ов.

![img.png](files/img1.png)

На основе чего Solution может принять решение, какой класс создавать? Solution должен быть независим от реализации, от конкретного набора классов - следовательно, **мы не можем использовать switch-case.**

**Идея решения:**

создаем карту продуктов, которые у нас существуют. При добавлении нового класса, регистрируем его в этой карте. Используя эту карту, осуществляем выбор. **Solution предоставляет метод для регистрации креаторов классов (в этой карте).**